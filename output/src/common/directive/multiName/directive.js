define(["require","../../app"],function(e){var t=e("../../app");t.directive("multiName",["$http","ajaxService",function(e,t){return{restrict:"EA",templateUrl:"src/common/directive/multiName/tpl.html",scope:{name:"@",disable:"=",require:"@",errorOption:"="},require:"?ngModel",replace:!1,compile:function(e,n,r,i){return{pre:function(e,t,n,r){},post:function(e,n,r,i){e.errorOption=e.errorOption||{},e.itemSetOption={tpl:"src/common/directive/multiName/itemSetTpl.html"},e.getAccounts=function(e){return t.send("/GET/ac/queryAccounts.json",{showLoading:!1,data:{searchKey:e}}).then(function(e){return e.data.map(function(e){return e.displayName+","+e.username})})},e.isUserExisted=function(t){for(var n=0,r;r=e.listValue[n++];)if(r.userName==t)return!0;return!1},e.typeaheadOnSelect=function(t){var n=e.value.split(",");e.isUserExisted(n[1])||e.listValue.push({name:n[0],userName:n[1]}),e.value="",i.$setViewValue(e.listValue)},i.$render=function(){e.listValue=i.$viewValue||[]}}}}}}])});