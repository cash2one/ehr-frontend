define(["require","../../app","module/config"],function(e){var t=e("../../app"),n=e("module/config");t.directive("levelInfo",["ajaxService","adminRequest",function(e,t){return{restrict:"EA",scope:{options:"="},require:"?ngModel",templateUrl:"src/module/admin/directive/levelInfo/tpl.html",replace:!1,compile:function(e,r,i,s){return{pre:function(e,t,n){var r="levelForm";e.inputOptions={level:{required:!0,displayName:"等级",name:"level",formName:r,maxLength:10,placeholder:"少于10个字"},levelName:{required:!0,displayName:"等级名称",name:"levelName",formName:r,maxLength:30,placeholder:"少于30个字"}}},post:function(e,r,i){function s(){e.editInfo=$.extend(!0,e.editInfo,e.options)}function o(){e.editInfo={level:undefined,levelName:undefined}}e.emptyValue=n.EMPTY_VALUE,e.onDel=function(){confirm("确认删除该等级吗？",function(){t.delLevel({id:e.options.id}).then(function(e){info("删除成功"),$(r).html("")})})},e.onEditSave=function(n){n.$submitted=!0;if(!n.$valid)return;var r={id:e.editInfo.id,level:e.editInfo.level,levelName:e.editInfo.levelName};t.modLevel(r).then(function(t){info("修改成功"),$.extend(!0,e.options,r),e.editing=!1})},e.onEdit=function(){e.editing=!0,s()},e.onCancelEdit=function(){e.editing=!1,o()}}}}}}])});