define(["require","../../app","moment"],function(e){var t=e("../../app"),n=e("moment");t.directive("applyStaffInfo",["$http","ajaxService",function(e,t){return{restrict:"EA",templateUrl:"src/module/apply/directive/staffInfo/tpl.html",scope:!1,require:"?ngModel",replace:!1,link:function(e,r,i,s){e.showFormalDate=!1,e.getInfo=function(){if(!e.number)return;return t.send("/GET/approve/staffCommonInfo.json",{data:{number:e.number}}).then(function(t){e.userCommonInfo=t.data,e.isAgent=e.userCommonInfo.type==21,e.userCommonInfo.type==1&&+n(e.userCommonInfo.formalTime).format("YYYYMMDD")>+n().format("YYYYMMDD")&&(e.showFormalDate=!0),e.onGetUserCommonInfo&&e.onGetUserCommonInfo()})},e.$watch("number",function(t,n){t!=n&&e.getInfo()},!0),e.getInfo()}}}])});