define(["require","../../app","./inputOptions","module/config","module/codeConfig","../../config","moment"],function(e){function a(e,t,r,u,a,f,l){function h(t){if(!t.$valid||!e.isReadStaffManual)return;confirm(s.WORK_TARGET_EXECUTE_TIP,function(){p()})}function p(){var n=o().format("YYYY-MM-DD"),r=(new Date(n+" 23:59:59")).getTime(),a={workTarget:e.detail.replace(/\n/g,"<br>").replace(/[ ]/g,"&nbsp;")},f=o().format("dddd");t.addApply({editedNumber:e.userCommonInfo.number,type:i.APPLY_CODE.WORK_TARGET,content:a,executeDate:r}).then(function(){alert(s.SUCCESS_TIP),c.hadSuccess=!0,u.dismiss(c)})}function d(){u.dismiss(c)}e.number=r.get("number"),e.save=h,e.closeHandler=d,e.inputOptions=n("workTargetForm",e);var c={}}var t=e("../../app"),n=e("./inputOptions"),r=e("module/config"),i=e("module/codeConfig"),s=e("../../config"),o=e("moment"),u={};t.controller("applyOptWorkTargetCtrl",a),a.$inject=["$scope","applyRequest","localStorage","$modalInstance","util","hrRequest","hrUtil"]});