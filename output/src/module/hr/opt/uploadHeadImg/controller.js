define(["require","../../app","module/config","module/codeConfig"],function(e){function s(e,t,n,r,i){function o(){e.imgOptions={width:550,height:350,action:"/ADD/file/file.json",accept:["png","jpg","jpeg"],minSize:100,maxSize:5120,button:{select:{x:80,y:310,width:80,height:36,text:"选择图片"},upload:{x:200,y:310,width:80,height:36,text:"保存图片"},leftRotate:{x:0,y:310,width:40,height:36,text:"左转"},rightRotate:{x:320,y:310,width:40,height:36,text:"右转"}},src:{x:0,y:0,width:360,height:300},dest:[{x:380,y:100,width:150,height:200,text:"头像"}],onValidateError:function(e){e.type=="size"&&alert("请上传大于100KB的文件")},onUploadComplete:function(e){var i=JSON.parse(e.data);s.url=i.data.url,r.modHeadImg({storageId:i.data.storageId,number:n}).then(function(){info("上传成功"),s.hadSuccess=!0,t.dismiss(s)})}}}function u(){var e=$("#head-img-upload")[0].files[0];if(!a(e)){alert("请上传正确后缀的文件");return}var o=new FormData;o.append("file",e),i.send("/ADD/file/file.json",{data:o,type:"file"}).then(function(e){s.url=e.data.url,r.modHeadImg({storageId:e.data.storageId,number:n}).then(function(){info("上传成功"),s.hadSuccess=!0,t.dismiss(s)})})}function a(e){function r(e,t){var t=t.toLowerCase();for(var n=0;n<e.length;n++)if(t==e[n])return!0;return!1}var t=e.name.split("."),n=t[t.length-1],i=["png","jpg","jpeg"];return r(i,n)?!0:!1}function f(){t.dismiss(s)}e.closeHandler=f,e.uploadImg=u;var s={};o()}var t=e("../../app"),n=e("module/config"),r=e("module/codeConfig"),i={};t.controller("hrOptUploadHeadImgController",s),s.$inject=["$scope","$modalInstance","number","hrRequest","ajaxService"]});