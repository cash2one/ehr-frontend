define(["require","../../app","module/config"],function(e){var t=e("../../app"),n=e("module/config");t.directive("familyInfo",["ajaxService","hrRequest",function(e,t){return{restrict:"EA",scope:{options:"="},require:"?ngModel",templateUrl:"src/module/hr/directive/familyInfo/tpl.html",replace:!1,compile:function(e,r,i,s){return{pre:function(e,t,n){var r="familyForm";e.inputOptions={name:{required:!0,displayName:"姓名",name:"name",formName:r,maxLength:30,placeholder:"少于30个字"},title:{required:!0,displayName:"称谓",name:"title",formName:r,maxLength:30,placeholder:"少于30个字"},birthday:{required:!1,displayName:"生日",name:"birthday",formName:r,type:"date",placeholder:"YYYY-MM-DD",filter:"dateFormat"},company:{required:!1,displayName:"单位",name:"company",formName:r,maxLength:30,placeholder:"少于30个字"},position:{required:!1,displayName:"职位",name:"position",formName:r,maxLength:30,placeholder:"少于30个字"},mobile:{required:!1,displayName:"联系电话",maxLength:15,name:"mobile",formName:r,pattern:"\\d*",placeholder:"少于15个数字"}}},post:function(e,r,i){function s(){e.editInfo=$.extend(!0,e.editInfo,e.options),e.editInfo.birthday=e.editInfo.birthday&&new Date(e.editInfo.birthday)}function o(){e.editInfo={name:undefined,title:undefined,birthday:undefined,company:undefined,position:undefined,mobile:undefined}}e.emptyValue=n.EMPTY_VALUE,e.onDel=function(){confirm("确认删除该条信息吗？",function(){t.delFamilyMember({id:e.options.id}).then(function(e){info("删除成功"),$(r).html("")})})},e.onEditSave=function(n){n.$submitted=!0;if(!n.$valid)return;var r={id:e.editInfo.id,name:e.editInfo.name,title:e.editInfo.title,birthday:e.editInfo.birthday&&e.editInfo.birthday.getTime(),company:e.editInfo.company,position:e.editInfo.position,mobile:e.editInfo.mobile};t.modFamilyMember(r).then(function(t){info("修改成功"),$.extend(!0,e.options,r),e.editing=!1})},e.onEdit=function(){e.editing=!0,s()},e.onCancelEdit=function(){e.editing=!1,o()}}}}}}])});